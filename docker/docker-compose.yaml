services:
  claude:
    image: claude_code:latest
    build: .
    container_name: claude_code
    user: "1000:1000"
    restart: unless-stopped
    environment:
      - TERM=xterm-256color
      - COLORTERM=truecolor
      - FORCE_COLOR=1
      - CLAUDE_CONFIG_DIR=/home/claude/.claude
    stdin_open: true
    tty: true
    cap_add:
      - NET_ADMIN
    volumes:
      # Workspace
      - ${HOST_HOME}/code/claude-workspace:/home/claude/workspace
      # Projects
      - ${HOST_HOME}/code/github/tesla-fetch:/home/claude/projects/tesla-fetch
      - ${HOST_HOME}/code/github/dotfiles:/home/claude/projects/d``otfiles
      - ${HOST_HOME}/code/github/claude-jail:/home/claude/projects/claude-jail
      - ${HOST_HOME}/code/github/Bonsi:/home/claude/projects/Bonsi
      - ${HOST_HOME}/.config/nvim:/home/claude/projects/nvim-config
      # Config
      - ${HOST_HOME}/.claude:/home/claude/.claude
      - ${HOST_HOME}/.claude.json:/home/claude/.claude/.claude.json
      # GH CLI credentials
      - gh_creds:/home/claude/.config/gh

volumes:
  gh_creds:
