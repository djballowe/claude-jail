services:
  claude:
    image: claude_code:latest
    container_name: claude_code
    build: .
    command: sudo /usr/local/bin/init-firewall.sh
    user: "1000:1000"
    restart: unless-stopped
    environment:
      - TERM=xterm-256color
      - COLORTERM=truecolor
      - FORCE_COLOR=1
      - CLAUDE_CONFIG_DIR=/home/node/.claude
    stdin_open: true
    tty: true
    cap_add:
      - NET_ADMIN
    volumes:
      # projects
      - /home/david/code/github/tesla-fetch:/home/node/projects/tesla-fetch
      - /home/david/code/github/dotfiles:/home/node/projects/dotfiles
      - /home/david/.config/nvim:/home/node/projects/nvim-config
      # config
      - /home/david/.claude:/home/node/.claude
      - /home/david/.claude.json:/home/node/.claude/.claude.json
